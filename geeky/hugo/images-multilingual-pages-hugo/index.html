<!doctype html>
<html lang="en">
    <head>
        <title>
            Including Images in Multilingual Pages with Hugo
        </title>
        <meta name="description" content="Images and multilingual image captions: problems and solutions">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <link rel="stylesheet" href="/css/perldoc.css">
        <link rel="stylesheet" href="/css/style.css">
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-162948019-2"></script>
        <script data-ad-client="ca-pub-3806180398510128" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script src="/js/hamburger.js"></script>
    </head>
    <body>
        <nav class="top">
            <a href="javascript:void(0);" class="box-shadow-menu" onclick="menuDrop()" title="Menu"></a>
            <a href="https://vendelin.org" class="logo">
                vendelin.org 
            </a>
        </nav>
        <div id="mobile-menu"></div>
        <div class="page">
            <nav class="breadcrumbs">
                <a href="https://vendelin.org/">Home</a><span>:</span><a href="https://vendelin.org/geeky/">Geeky Stuff</a><span>:</span><a href="https://vendelin.org/geeky/hugo/">Hugo Cookbook for a Multilingual Site</a>
            </nav>
            <main class="container">
            <nav class="menu" id="ndrop">
    
    <h2>Sections:</h2>
    
        <a href="https://vendelin.org/geeky/" class="menu-section">Geeky Stuff</a>
    
        <a href="https://vendelin.org/travel/" class="menu-section">Travel Accounts</a>
    
    
        <a href="https://vendelin.org/about/" class="menu-section">About</a>
    
</nav>


            
    <article class="main-single">
        

        <h1 id="including-images-in-multilingual-pages-with-hugo">Including Images in Multilingual Pages with Hugo</h1>
<p>Including images in multilingual context is a tricky business. The trick is, an image is a piece of
content in its own right, with its own attributes, most important being the caption, which for N
languages translates into N captions. In a typical editorial workflow, photos and articles come from
two different types of sources (photographers and writers, respectively), and it is a photographer,
who writes the captions (in one language at least).</p>
<p>Of course, if you run your site single-handed, and all images are made by you, the problem is not
that sharp. So, let&rsquo;s start with</p>
<h2 id="a-simple-approach">A Simple Approach</h2>
<p>Markdown allows for the following:</p>
<div class="highlight"><pre class="chroma"><code class="language-md" data-lang="md">![<span class="nt">&#34;alt attribute&#34;</span>](<span class="na">/img/IMAG0024.jpg &#34;title attribute&#34;</span>)
</code></pre></div><p>This translates into</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/img/IMAG0024.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;alt attribute&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;title attribute&#34;</span><span class="p">&gt;</span>
</code></pre></div><p>But we probably want to translate it into something like</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">figure</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/img/IMAG0024.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;alt attribute&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;title attribute&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">figcaption</span><span class="p">&gt;</span>
        title attribute
    <span class="p">&lt;/</span><span class="nt">figcaption</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">figure</span><span class="p">&gt;</span>
</code></pre></div><p>To make this happen, create a file <code>themes/&lt;YOUR THEME&gt;/layouts/_default/_markup/render-image.html</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">figure</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ .Destination }}&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;{{ .Text }}&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;{{ .Title }}&#34;</span><span class="p">&gt;</span>
    {{- with .Title }}
    <span class="p">&lt;</span><span class="nt">figcaption</span><span class="p">&gt;</span>
        {{.}}
    <span class="p">&lt;/</span><span class="nt">figcaption</span><span class="p">&gt;</span>
    {{ end -}} 
<span class="p">&lt;/</span><span class="nt">figure</span><span class="p">&gt;</span>
</code></pre></div><p>This is called a <a href="https://gohugo.io/getting-started/configuration-markup#markdown-render-hooks" target="_blank">markup render hook</a>

and is a very new addition as of this writing. Best of all, you can define custom hooks per content
type (more on that in a <a href="https://vendelin.org/geeky/hugo/layout-customize-hugo/">later chapter</a>
).</p>
<p>The editing is still a bit of a hurdle: imagine, step by step, the process of changing a single
image in an article with four language versions. And changing it back ten minutes later, as you
change your mind. Four languages = four edits! And watch out for image-caption mismatches – this can
lead to hilarious (or embarrassing) situations.</p>
<h2 id="a-composite-page-resource-or-symlinks-to-the-rescue">A Composite Page Resource, or Symlinks to the Rescue</h2>
<p>This works, if placing just one single image before or after content is enough. In this case, things
can be resolved at template level.</p>
<p>Let&rsquo;s create a directory (perhaps even outside our website project), and in this directory for
each image that we might consider to use, let&rsquo;s create a subdirectory containing the image file
itself and the captions in all necessary languages:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">images/
└── tantan
    ├── IMAG0024.jpg
    ├── caption.md
    └── caption.ru.md
</code></pre></div><p>Tantan is a Moroccan town, often considered &lsquo;the gateway&rsquo; to West Sahara, just if you are curious.</p>
<p>Now, in our page bundle directory, let&rsquo;s create a symlink with a &lsquo;magic&rsquo; name:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">ln -s images/tantan &lt;PATH TO PAGE BUNDLE&gt;/main-image
</code></pre></div><p>Finally, let&rsquo;s create a dedicated partial for planting an image with a caption in the relevant
language on top of the content based on our naming convention:</p>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">{{ $caption := .Resources.GetMatch &#34;main-img/caption.*&#34; }}
{{ with .Resources.GetMatch &#34;main-img/*.jpg&#34; }}
<span class="p">&lt;</span><span class="nt">figure</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ .Permalink }}&#34;</span><span class="p">&gt;</span>
    {{ with $caption }}
    <span class="p">&lt;</span><span class="nt">figcaption</span><span class="p">&gt;</span>
        {{ .Content }}
    <span class="p">&lt;/</span><span class="nt">figcaption</span><span class="p">&gt;</span>
    {{ end }}
<span class="p">&lt;/</span><span class="nt">figure</span><span class="p">&gt;</span>
{{ end }}
</code></pre></div><p>We need to capture the caption into a variable (<code>$caption</code>) while still in <code>.Page</code> context, so that
we can refer to it from within the image resource&rsquo;s context later. If there happens to be no
caption, the relevant block of code will be simply ignored.</p>
<p>This solves our concern with descriptiveness of the image file name, since we can easily see where
the symlink points to with <code>ls -l</code>:</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback">main-img -&gt; /home/me/images/tantan
</code></pre></div><p>The captions are unambiguously connected to the image. Best of all, if we want to use a different
image, all we need is to change is a single symlink. This also guards us against the embarrassments of using
a wrong caption.</p>
<p>Unfortunately, it didn&rsquo;t work with markup render hooks (although it <em>seemed</em> to work with
hugo server).</p>
<h2 id="and-then-there-are-shortcodes">And Then There are Shortcodes</h2>
<p>Shortcodes are variables that can be included into Markdown. They have their own templates, which
are rendered and included into the HTML generated from the Markdown. There is an elaborate built-in
shortcode for images, figure . Though in certain cases shortcodes are inevitable, in this particular
case it violates the core markdown principles – simplicity and readability. Besides, the
introduction of markup hooks largely obsoletes it.</p>

        <nav class="nextprev">

<p>
    Next: 
    <br>
    <a href="https://vendelin.org/geeky/hugo/summary-linktitle-hugo/">
         Featured Content, Page Summary, Link Texts with Hugo
    </a>
</p>


<p>
    Previous: 
    <br>
    <a href="https://vendelin.org/geeky/hugo/create-multilingual-content-hugo/">
         Multilingual Content With Hugo
    </a>
</p>

</nav>

        <div id="disqus_thread"></div>
    </article>
    <script>
function disqus() {

    var disqus_config = function () {
        this.page.url = "https://vendelin.org/geeky/hugo/images-multilingual-pages-hugo/";  
        this.page.identifier = "bc9516c2dbfd5ccd98772e2784fce292";   
    };
    (function() {  
        var d = document, s = d.createElement('script');

        s.src = 'https://vendelin-org.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();

}

window.addEventListener('load', function(event){
    var decn = cookieDecision();

    if(decn) {
        const accept = decn.split('=')[1];
        if( accept == 1 ){
            disqus();
        }
    }

    document.getElementById('accept').addEventListener('click', function (){
        disqus();
    });
});
</script>


            </main>
        </div>
        <div id="gdpr">
        <div class="cookie-consent">
            <p>
                We use third-party cookies for analytics and comments. Disabling cookies disables comments.
            </p>
            <a id="reject" href="#">Reject</a>
            <a id="accept" href="#">Accept</a>

        </div>
        </div>
    </body>
</html>
