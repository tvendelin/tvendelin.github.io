<!doctype html>
<html lang="en" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/WebPage">
    <head>
        <meta name="description" content="Images and multilingual image captions: minimum of editing, maximum reliability">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/customized.css">
        <script async src="/js/hamburger.js"></script>
        
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZE53M84CZV"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'G-ZE53M84CZV');
        </script><title>
            Including Images in Multilingual Pages with Hugo
        </title>
        <link rel="stylesheet" href="/css/perldoc.css">
        <link rel="stylesheet" href="/css/gdpr.css">
        <script async src="/js/gdpr.js"></script>

        <meta property="og:type" content="article">

<meta itemprop="name" property="og:title" content="Including Images in Multilingual Pages with Hugo">
<meta id="meta-descr" itemprop="description" property="og:description" content="Images and multilingual image captions: minimum of editing, maximum reliability">
<meta id="meta-published" itemprop="datePublished" content="2020-05-31T19:15:26+02:00">
<meta id="meta-modified" itemprop="dateModified" content="2020-08-09T08:35:06+02:00">
<meta id="meta-in-lang" itemprop="inLanguage" content="en">

<meta property="og:url" content="https://vendelin.org/geeky/hugo/images-multilingual-pages-hugo/">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="vendelin.org">
<meta property="og:image:alt" content="">

<meta name="twitter:card" content="summary_large_image">
<meta itemprop="image" property="og:image" content="https://vendelin.org/img/vendelin_org.png">
<meta id="meta-keywords" itemprop="keywords" content="Hugo"><link rel="canonical" href="https://vendelin.org/geeky/hugo/images-multilingual-pages-hugo/">

        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,400;0,700;1,400;1,700&family=Open+Sans+Condensed:ital,wght@0,300;0,700;1,300&family=Open+Sans:wght@300;400;600;700&family=Source+Code+Pro:wght@400;500;700&display=swap" rel="stylesheet"> 

        <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#990000">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="theme-color" content="#ffffff">

    </head>
    <body itemscope itemtype="http://schema.org/WebPage">
        <nav class="top">
            <a href="javascript:void(0);" class="box-shadow-menu" onclick="menuDrop()" title="Menu"></a>
            <a href="https://vendelin.org" class="logo">
                vendelin.org 
            </a>
        </nav>
        <div id="mobile-menu"></div>
        <div class="page">
            <nav class="breadcrumbs">
<ol itemprop="breadcrumb" itemscope itemtype="http://schema.org/BreadcrumbList">
<meta itemprop="name" content="Breadcrumbs">
<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="https://vendelin.org/">
        <meta itemprop="position" content="1">
        <span itemprop="name" class="micro">Home</span></a><span class="col">:</span></li>
<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="https://vendelin.org/geeky/">
        <meta itemprop="position" content="2">
        <span itemprop="name" class="micro">Geeky Stuff</span></a><span class="col">:</span></li>
<li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
    <a itemprop="item" href="https://vendelin.org/geeky/hugo/">
        <meta itemprop="position" content="3">
        <span itemprop="name" class="micro">Hugo Cookbook for a Multilingual Site</span></a></li>
</ol>
</nav>
            <div class="container"><div class="grid-left"><nav class="menu" id="authors">

<a href="https://vendelin.org/authors/tvendelin/">
    <div class="author" itemprop="author" id="author-tvendelin" itemscope itemtype="http://schema.org/Person">
        <link href="https://vendelin.org/authors/tvendelin/" rel="author">
    
    <figure>
        <img src="https://vendelin.org/img/tvendelin.jpg" alt="" itemprop="image">
    </figure><div class="name" itemprop="name">
        Toomas Vendelin
    </div>
</div>
</a></nav><nav class="menu" id="ndrop" itemscope itemtype="http://schema.org/SiteNavigationElement">
        <meta itemprop="name" content="Main Navigation Menu">
        <div class="section">Sections:</div>

        <ul class="link-list"><li><a itemprop="url"  href="https://vendelin.org/geeky/">Geeky Stuff</a></li>
        <li><a itemprop="url"  href="https://vendelin.org/travel/">Travel Accounts</a></li>
        <li><a itemprop="url" href="https://vendelin.org/about/">About</a></li></ul>
        <div class="section">Look by</div>

        <ul class="link-list"><li><a itemprop="url" href="/authors">Authors</a></li><li><a itemprop="url" href="/tags">Tags</a></li></ul>

    </nav>
</div>

























<main class="main-single">
    <article itemscope itemtype="http://schema.org/Article" itemref="meta-descr meta-published meta-modified meta-in-lang author-tvendelin">
        <meta itemprop="mainEntityOfPage" content="https://vendelin.org/geeky/hugo/images-multilingual-pages-hugo/">
            <h1 itemprop="headline">Including Images in Multilingual Pages with Hugo</h1>
            
            


            <p>Including images in multilingual context is a tricky business. The problem is, an image is a piece of
content in its own right, with its own attributes, most important being the caption, which for N
languages translates into N captions. In a typical editorial workflow, photos and articles come from
two different types of sources (photographers and writers, respectively), and it is a photographer,
who writes the captions â€“ in one language at least.</p>
<p>It&rsquo;s usually an editor who decides, which images to use with which article. And sometimes, the same
image might be used by more than one article. So, the number of places to edit to change anything
about a single image can grow quite quickly.</p>
<p>Of course, if you run your site single-handed, and all images are made by you, the problem is not
that sharp. So, let&rsquo;s start with</p>
<h2 id="a-simple-approach"><a class="h-link" href="#a-simple-approach">A Simple Approach</a></h2>
<p>Markdown allows for the following:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-md" data-lang="md"><span class="line"><span class="cl">![<span class="nt">&#34;alt attribute&#34;</span>](<span class="na">/img/IMAG0024.jpg &#34;title attribute&#34;</span>)
</span></span></code></pre></div><p>This translates into</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/img/IMAG0024.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;alt attribute&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;title attribute&#34;</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>But we probably want to translate it into something like</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">figure</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;/img/IMAG0024.jpg&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;alt attribute&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;title attribute&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">figcaption</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        title attribute
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">figcaption</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">figure</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>To make this happen, create a file <code>themes/&lt;YOUR THEME&gt;/layouts/_default/_markup/render-image.html</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-html" data-lang="html"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">figure</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;main&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;{{ .Destination }}&#34;</span> <span class="na">alt</span><span class="o">=</span><span class="s">&#34;{{ .Text }}&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;{{ .Title }}&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{- with .Title }}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">figcaption</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        {{.}}
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">figcaption</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    {{ end -}} 
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">figure</span><span class="p">&gt;</span>
</span></span></code></pre></div><p>This is called a <a href="https://gohugo.io/getting-started/configuration-markup#markdown-render-hooks" target="_blank" rel="noopener">markup render hook</a>

and is a very new addition as of this writing. Best of all, you can define custom hooks per content
type (more on that in a <a href="https://vendelin.org/geeky/hugo/layout-customize-hugo/">later chapter</a>
).</p>
<p>The editing is still a bit of a hurdle: imagine, step by step, the process of changing a single
image in an article with four language versions. And changing it back ten minutes later, as you
change your mind. Four languages = four edits! And watch out for image-caption mismatches â€“ this can
lead to hilarious (or embarrassing) situations.</p>
<p>Ideally, I&rsquo;d prefer to have&hellip; Let&rsquo;s call it an &lsquo;image bundle&rsquo;.</p>
<h2 id="image-bundle"><a class="h-link" href="#image-bundle">Image Bundle</a></h2>
<p>The idea is to create a unit containing an image and translations of the associated texts, and then
link it to the page bundle. With Hugo, it is possible to create page bundles that are not listed nor
rendered, but can be loaded into a page using <code>.Site.GetPage</code> method. So, we can create a page bundle
with a single image as a resource, put the captions to that image into <code>index.*md</code> files â€“ and who
cares that the image is actually the main part there and that we have essentially turned the idea of
a page bundle inside out?</p>
<p>Let&rsquo;s create a dedicated directory for our image bundles called <code>kontent/images</code>. To prevent its
contents from having an independent life of its own, let&rsquo;s put this into <code>kontent/images/_index.md</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">---
</span></span><span class="line"><span class="cl">draft: false
</span></span><span class="line"><span class="cl">cascade:
</span></span><span class="line"><span class="cl">    _build:
</span></span><span class="line"><span class="cl">        list: never
</span></span><span class="line"><span class="cl">        render: false
</span></span><span class="line"><span class="cl">---
</span></span></code></pre></div><p>The <code>cascade</code> part will apply rendering and listing restrictions to whatever is under this
directory. Repeat for every site language.</p>
<p>The image bundle itself would look like this:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">kontent/images/myimage
</span></span><span class="line"><span class="cl">â”œâ”€â”€ anyname.jpg
</span></span><span class="line"><span class="cl">â”œâ”€â”€ index.de.md
</span></span><span class="line"><span class="cl">â”œâ”€â”€ index.md
</span></span><span class="line"><span class="cl">â””â”€â”€ index.ru.md
</span></span></code></pre></div><p>Now we can modify our markup rendering hook to lookup for an image bundle whenever it sees a
<code>.Destination</code> without &rsquo;extension':</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">{{- with .Site.GetPage print &#34;kontent/images/&#34; .Destination -}} 
</span></span></code></pre></div><p>It will load an entire &lsquo;page&rsquo;, whose content is the image
caption, with a single image resource â€“ the image we want to place in our page. The current
language will be respected, so you will get the right caption in the right language.</p>
<p>Referring to our image from the content file will be terse, since <code>alt</code> text and caption come from
the image bundle:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-md" data-lang="md"><span class="line"><span class="cl">![](myimage)
</span></span></code></pre></div><p>Further improvements may include ability to override <code>alt</code> and captions in the Markdown. This is how
it works in <a href="https://vendelin.org/geeky/errorist/">Errorist theme.</a>
 The &lsquo;magic&rsquo; directory name should be
replaced with a configuration parameter, of course.</p>
<h2 id="first-image-comes-free"><a class="h-link" href="#first-image-comes-free">First Image Comes Free</a></h2>
<p>Of all images used in an article, there is probably one, that is a &lsquo;representative of page&rsquo;, using
Schema.org jargon. Such an image is usually placed in the top part of the page, meaning it can be
handled as a separate unit at the template level, so we wouldn&rsquo;t need to litter our markdown at all.
More to that, such image is typically used for all translations of a page, so it would be a waste to
set it in four places (if there are four site languages), when we can set it in just one.</p>
<p>Unfortunately, Hugo doesn&rsquo;t provide for a configuration file at a page bundle level. But we can make a
small file with a single line pointing to the image bundle, and read it as a page resource. If we
agree that such file will be called, say, <code>main-img</code>, we can define the main image for a
multilingual page in a single edit.</p>
<p>Dare I call it &rsquo;efficient&rsquo;?</p>

            <nav class="nextprev">
<p class="next">
    <a href="https://vendelin.org/geeky/hugo/summary-linktitle-hugo/">
         Featured Content, Page Summary, Link Texts &rarr;
    </a>
</p>
<p class="prev">
    <a href="https://vendelin.org/geeky/hugo/create-multilingual-content-hugo/">
         &larr; Multilingual Content With Hugo
    </a>
</p>
</nav>
<div id="disqus_thread"></div>
    </article>
</main><script>
function disqus() {

    var disqus_config = function () {
        this.page.url = "https://vendelin.org/geeky/hugo/images-multilingual-pages-hugo/";  
        this.page.identifier = "bc9516c2dbfd5ccd98772e2784fce292";   
    };
    (function() {  
        var d = document, s = d.createElement('script');

        s.src = 'https://vendelin-org.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();

}

window.addEventListener('load', function(event){
    var decn = cookieDecision();

    if(decn) {
        const accept = decn.split('=')[1];
        if( accept == 1 ){
            disqus();
        }
    }

    document.getElementById('accept').addEventListener('click', function (){
        disqus();
    });
});
</script></div><div class="made-by">
    <p>
        Built with <a href="https://vendelin.org/geeky/errorist">Errorist</a> theme for <a href="https://gohugo.io">Hugo</a> site generator.
    </p>
</div>
</div><div id="gdpr" style="display: none">
    <div class="cookie-consent">
        <p>
            We use third-party cookies for analytics and comments. Disabling cookies disables comments.
        </p>
        <a id="reject" href="#">Reject</a>
        <a id="accept" href="#">Accept</a>
    </div>
</div>
<figure id="expanded" onclick="restorePic(event)">
    <img id="big-pic">
</figure>
</body>
</html>
